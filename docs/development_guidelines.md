# 開發與協作規範 (Development Guidelines)

本文件記錄專案的開發規則與溝通標準，所有開發工作必須遵循以下規範。

## 1. 圖片生成規範 (Image Generation)
- **模式限制**：所有圖片生成一律採用 **圖生圖 (Image-to-Image)** 模式。
- **基底圖確認**：在生成任何圖片前，**必須**與使用者確認使用的「基底圖 (Base Image)」。
    - 例外情況：除非使用者明確說明「不需要確認」或「不用基底圖」。

## 2. 版本控制 (Versioning)
- **版本號規則**：
    - **小改版 (Minor/Patch)**：如 Bug fix、小優化，使用小數點後兩位（例如：v4.71, v4.72）。直接宣告即可。
    - **大改版 (Major)**：涉及功能重構、UI 大改或新功能模組。**必須先跟使用者確認**後才可進行，並更新主版本號（例如：v5.0）。
- **版本宣告**：每次更新（無論大小）完成後，都必須明確宣告當前版本號。

## 3. 備份機制 (Backup Policy)
- **大改版前備份**：在進行任何「大改版」之前，**必須強制備份**當前專案狀態。
- **通知**：備份完成後，必須告知使用者備份已完成，才開始進行修改。
- **日常備份**：依原有習慣，每次程式碼修改成功後應進行 `git commit`。

## 4. 溝通語言 (Language)
- **一律使用中文**：所有對話、說明、詢問皆使用**中文**溝通。

## 5. 文件管理 (Documentation)
- **目錄位置**：所有非程式碼的專案文件（如：工作規劃、架構說明、API 文件、備忘錄等），一律存放在專案根目錄下的 `/docs` 資料夾中。

## 6. CSS 修改安全規範 (CSS Safety)
- **修改前檢查**：修改任何 CSS 前，必須先確認影響範圍，列出受影響的選擇器。
- **全域佈局保護**：禁止直接修改全域佈局屬性（`.main-container`, `.output-section`, `body`, `:root` 的佈局屬性），除非使用者明確要求。
- **區段標記**：新增功能的 CSS 必須用 `/* === 功能名稱 START === */` 和 `/* === END === */` 包裹。
- **修改後驗證**：CSS 修改完成後，必須在瀏覽器中截圖確認所有 tab 畫面正常。
- **安全流程**：修改 CSS 前執行 `/css-safety` workflow。
- **回滾策略**：如果修改後畫面異常，立刻 `git checkout -- styles.css` 回滾。

## 7. 強化備份機制 (Enhanced Backup)
- **每次改版備份**：無論大小改版，每次版本變更都必須 `git commit` + `git push`。
- **大改版快照**：版本號 +0.1 或 +1.0 時，額外建立 `backups/vX.X_snapshot/` 快照。
- **修改前備份**：每次修改超過 50 行程式碼前，必須先 `git commit` 當前狀態。
- **備份優先**：備份完成前，不得開始任何修改工作。
- **手動觸發**：任何時候都可用 `/backup` workflow 建立即時備份。

