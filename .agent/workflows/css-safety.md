---
description: 修改 CSS 前的安全檢查流程，防止畫面跑掉
language: zh-TW
---

> 📌 提醒：本專案一律使用繁體中文溝通。

# CSS 修改安全檢查 SOP

每當需要修改 `styles.css` 時，**必須**依照以下步驟進行，防止畫面跑掉。

> ⚠️ **歷史教訓**：過去多次因為修改 CSS 導致全頁面佈局崩潰，花大量時間修復。

---

## 1. 修改前截圖（必要步驟）

// turbo-all

1. 在瀏覽器開啟頁面
2. 截圖所有 tab（基本、外觀、場景、效果、攝影）
3. 截圖設定面板（如涉及 modal/settings）
4. 儲存截圖作為「修改前基準」

---

## 2. 影響範圍分析（必要步驟）

修改前先回答以下問題：

| 問題 | 回答 |
|------|------|
| 要修改哪些 CSS 選擇器？ | （列出） |
| 這些選擇器屬於哪個區段？ | 對照 styles.css 頂部目錄 |
| 區段是否標記 🔒？ | 如果是，必須徵得使用者同意 |
| 修改的屬性影響佈局嗎？ | `display`, `position`, `flex`, `grid`, `width`, `height`, `overflow`, `margin`, `padding` 都算 |
| 有沒有其他元素依賴這些屬性？ | grep 檢查引用 |

### 操作步驟
```
1. grep 搜尋要修改的 CSS 選擇器在 HTML/JS 中的引用
2. 確認沒有其他元件依賴要改的屬性
3. 如果涉及 🔒 區段，停下來詢問使用者
```

---

## 3. 執行修改

- 新增的 CSS 用區段標記包裹：
```css
/* === 功能名稱 START === */
.new-feature { ... }
/* === 功能名稱 END === */
```

- 修改現有 CSS 時，加入修改註解：
```css
.existing-class {
    /* v5.X 修改：原因說明 */
    property: new-value;
}
```

---

## 4. 修改後驗證（必要步驟）

// turbo-all

1. 在瀏覽器重新載入頁面
2. 截圖所有 tab，與修改前截圖對比
3. 確認以下項目：
   - [ ] 所有 tab 切換正常
   - [ ] 左欄/右欄佈局沒有跑掉
   - [ ] 按鈕、tag 樣式正常
   - [ ] Modal/彈窗正常
   - [ ] 響應式佈局正常（如適用）
4. 如果畫面有異常，立刻回滾修改

---

## 5. 回滾策略

如果修改後畫面異常：
```
1. git checkout -- styles.css  （回到上次 commit）
2. 或手動還原修改的部分
3. 重新載入確認恢復正常
4. 分析失敗原因後重新規劃
```
