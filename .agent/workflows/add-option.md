---
description: 新增任何選項（種族、職業、服飾、配件等）的標準流程，包含衝突判斷與性別轉換
---

# 新增選項標準流程

每當新增種族、職業、服飾、配件或任何其他分類的選項時，**必須**執行以下所有步驟：

## 1. 加入選項資料
- 在 `script.js` 對應的陣列（如 `RACES`、`JOBS`、`TAB_SECTIONS` 等）中新增項目
- 格式：`{ label: '中文名', en: 'English', value: 'prompt keywords' }`

## 2. 性別轉換檢查（必要步驟）
檢查新增的選項是否帶有**性別屬性**。如果是，**必須**提供男女兩個版本，或確認該選項為中性。

### 判斷方式
- 選項名稱或 prompt value 中是否包含 girl / maiden / 娘 / 姬 等女性詞？
- 選項在現實或動漫文化中是否有強烈的性別關聯？（如：巫女 → 女性、神官 → 男性）

### 處理方式：自動轉換（不跳警告彈窗）
如果選項有性別屬性，確保系統在切換性別時**自動轉換為對應版本**：

| 女性版本 | 男性版本 | 說明 |
|----------|----------|------|
| 巫女 shrine maiden | 神官 shrine priest | 神社職 |
| 貓娘 cat girl | 貓男 cat boy | 獸耳系 |
| 狐娘 fox girl | 狐男 fox boy | 獸耳系 |
| 龍人(女) dragon girl | 龍人(男) dragon boy | 種族 |
| 女僕 maid | 執事 butler | 服務職 |
| 魔法少女 magical girl | 魔法少年 magical boy | 魔法系 |

實作方式：透過 `genderDependent: true` 標記，在 `renderTabContent` 中根據 `state.gender` 選擇對應陣列。

## 3. 衝突判斷（必要步驟）
新增選項後，**必須**逐一檢查該選項與**所有其他分類的現有選項**是否存在邏輯衝突。

### 判斷標準
思考以下問題，判斷是否會衝突：
- 神聖 vs 闇黑/邪惡（如：天使 × 魔王、吸血鬼 × 修女）
- 實體 vs 非實體（如：幽靈 × 廚師）
- 體型限制（如：妖精 × 太空人、人魚 × 忍者）
- 科技 vs 魔法（如：機器人 × 魔法師）
- 形體限制（如：史萊姆 × 需要穿制服的職業）
- 裝備/服飾矛盾（如：重甲 × 泳裝）
- 如果兩者在動漫/奇幻作品中是常見組合或有趣設定，則**不算衝突**（如：殭屍偶像）

### 衝突規則格式
如果判斷有衝突，在 `CONFLICT_RULES` 陣列中新增：
```javascript
{ a: '分類A', b: '分類B', keyword_a: 'keywordA', keyword_b: 'keywordB', reason: '🎭 衝突原因描述' }
```

## 4. 回報新增結果
告知用戶：
- 新增了什麼選項
- 是否有性別轉換版本（男/女各是什麼）
- 發現了哪些衝突（如有）
- 加入了幾條衝突規則
